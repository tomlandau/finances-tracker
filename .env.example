# Airtable Configuration
# Get your Personal Access Token from: https://airtable.com/create/tokens
AIRTABLE_API_KEY=patXXXXXXXXXXXXXX

# Get your Base ID from the Airtable URL: https://airtable.com/appXXXXXXXXXXXXXX
AIRTABLE_BASE_ID=appXXXXXXXXXXXXXX

# Table Names (use exact Hebrew names from your Airtable base)
AIRTABLE_INCOME_TABLE=הכנסות
AIRTABLE_INCOME_CATEGORIES_TABLE=מקורות הכנסה
AIRTABLE_EXPENSE_TABLE=הוצאות
AIRTABLE_EXPENSE_CATEGORIES_TABLE=מקורות הוצאה

# Field Names - מקורות הכנסה Table
AIRTABLE_CATEGORY_NAME_FIELD=שם
AIRTABLE_CATEGORY_STATUS_FIELD=סטטוס
AIRTABLE_CATEGORY_OWNER_FIELD=של מי ההכנסה
AIRTABLE_CATEGORY_DOMAIN_FIELD=תחום

# Field Names - מקורות הוצאה Table
AIRTABLE_EXPENSE_CATEGORY_NAME_FIELD=תיאור/הערות
AIRTABLE_EXPENSE_CATEGORY_STATUS_FIELD=סטטוס
AIRTABLE_EXPENSE_BUSINESS_HOME_FIELD=עסקי/בית
AIRTABLE_EXPENSE_DOMAIN_FIELD=תחום
AIRTABLE_EXPENSE_TYPE_FIELD=סוג הוצאה
AIRTABLE_EXPENSE_RENEWAL_DATE_FIELD=תאריך חידוש הוצאה

# Field Names - הכנסות Table
AIRTABLE_INCOME_DATE_FIELD=תאריך
AIRTABLE_INCOME_CATEGORY_FIELD=מקור הכנסה
AIRTABLE_INCOME_AMOUNT_FIELD=סכום הזנה
AIRTABLE_INCOME_VAT_FIELD=מע"מ
AIRTABLE_INCOME_VAT_TYPE_FIELD=הזנה עם או בלי מע"מ
AIRTABLE_INCOME_DESCRIPTION_FIELD=תיאור/הערות
AIRTABLE_INCOME_RECURRING_FIELD=מחזורי

# Field Names - הוצאות Table
AIRTABLE_EXPENSE_DATE_FIELD=תאריך
AIRTABLE_EXPENSE_CATEGORY_FIELD=מקור הוצאה
AIRTABLE_EXPENSE_AMOUNT_FIELD=סכום הזנה
AIRTABLE_EXPENSE_VAT_FIELD=מע"מ
AIRTABLE_EXPENSE_VAT_TYPE_FIELD=הזנה עם או בלי מע"מ
AIRTABLE_EXPENSE_DESCRIPTION_FIELD=הערות נוספות
AIRTABLE_EXPENSE_RECURRING_FIELD=יצירת הוצאות מחזוריות

# Lookup Fields for Category Names (Phase 3)
AIRTABLE_INCOME_CATEGORY_NAME_LOOKUP=שם מקור הכנסה
AIRTABLE_EXPENSE_CATEGORY_NAME_LOOKUP=שם מקור הוצאה

# Formula/Calculated Fields - הכנסות (Phase 3)
AIRTABLE_INCOME_NET_FIELD=סכום נטו
AIRTABLE_INCOME_VAT_AMOUNT_FIELD=סכום מע"מ
AIRTABLE_INCOME_GROSS_FIELD=סכום ברוטו

# Formula/Calculated Fields - הוצאות (Phase 3)
AIRTABLE_EXPENSE_NET_FIELD=סכום נטו
AIRTABLE_EXPENSE_VAT_AMOUNT_FIELD=סכום מע"מ
AIRTABLE_EXPENSE_GROSS_FIELD=סכום ברוטו

# Audit Log Table (Phase 4)
AIRTABLE_AUDIT_LOG_TABLE=Audit Log

# WebAuthn Credentials Table (Phase 5)
AIRTABLE_WEBAUTHN_TABLE=WebAuthn Credentials

# ========================================
# Scraper Tables and Fields (Phase 1)
# ========================================

# Transactions Table - טבלת תנועות
AIRTABLE_TRANSACTIONS_TABLE=תנועות

# Field Names - תנועות Table
AIRTABLE_TRANSACTION_HASH_FIELD=TransactionHash
AIRTABLE_TRANSACTION_DATE_FIELD=תאריך
AIRTABLE_TRANSACTION_AMOUNT_FIELD=סכום
AIRTABLE_TRANSACTION_DESCRIPTION_FIELD=תיאור
AIRTABLE_TRANSACTION_SOURCE_FIELD=מקור
AIRTABLE_TRANSACTION_STATUS_FIELD=סטטוס
AIRTABLE_TRANSACTION_USER_ID_FIELD=מזהה משתמש

# Accounts Table - טבלת חשבונות
AIRTABLE_ACCOUNTS_TABLE=חשבונות

# Field Names - חשבונות Table
AIRTABLE_ACCOUNT_NAME_FIELD=שם
AIRTABLE_ACCOUNT_TYPE_FIELD=סוג
AIRTABLE_ACCOUNT_USER_ID_FIELD=מזהה משתמש
AIRTABLE_ACCOUNT_ACTIVE_FIELD=פעיל
AIRTABLE_ACCOUNT_LAST_BALANCE_FIELD=יתרה אחרונה
AIRTABLE_ACCOUNT_LAST_SCRAPED_FIELD=סקרייפינג אחרון

# ========================================
# Authentication & Security Configuration
# ========================================

# JWT Secrets (generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))")
JWT_SECRET=your-secret-here-generate-with-crypto
JWT_REFRESH_SECRET=your-refresh-secret-here-generate-with-crypto

# Token Expiry
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# User 1 Configuration
# Password hash: generate with bcryptjs (bcrypt.hash('your-password', 10))
# TOTP Secret: generate with speakeasy or leave empty to disable 2FA
AUTH_USER_TOM_USERNAME=tomlandau
AUTH_USER_TOM_PASSWORD_HASH=$2b$10$XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
AUTH_USER_TOM_ID=usr_tom_001
AUTH_USER_TOM_TOTP_SECRET=

# User 2 Configuration
AUTH_USER_YAEL_USERNAME=yael
AUTH_USER_YAEL_PASSWORD_HASH=$2b$10$XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
AUTH_USER_YAEL_ID=usr_yael_001
AUTH_USER_YAEL_TOTP_SECRET=

# Security
# Comma-separated list of allowed origins for CORS
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3001

# WebAuthn Configuration (Phase 5 - Biometric Authentication)
# RP (Relying Party) ID - your domain without protocol (e.g., 'localhost' for dev, 'your-app.vercel.app' for prod)
WEBAUTHN_RP_ID=localhost
# Origin - full URL including protocol (e.g., 'http://localhost:5173' for dev, 'https://your-app.vercel.app' for prod)
WEBAUTHN_ORIGIN=http://localhost:5173

# ========================================
# Server Configuration (Railway)
# ========================================

# Environment (development|production)
NODE_ENV=production

# Port (Railway auto-assigns, leave empty for local dev default 3001)
PORT=

# ========================================
# Classification Engine Configuration (Phase 2)
# ========================================

# Sumit API Integration
# Get API key and business IDs from Sumit dashboard
SUMIT_API_KEY=
SUMIT_BUSINESS_1_ID=
SUMIT_BUSINESS_2_ID=

# Client Airtable Bases Integration
# Base IDs from business Airtable workspaces
AIRTABLE_BUSINESS_1_BASE_ID=
AIRTABLE_BUSINESS_2_BASE_ID=

# Client Table Configuration
AIRTABLE_CLIENTS_TABLE_NAME=Clients
AIRTABLE_CLIENT_NAME_FIELD=שם
AIRTABLE_CLIENT_PAYMENT_DATE_FIELD=תאריך תשלום צפוי
AIRTABLE_CLIENT_AMOUNT_FIELD=סכום צפוי

# Classification Rules Table
AIRTABLE_CLASSIFICATION_RULES_TABLE=חוקי סיווג

# Classification Rules Table Fields
AIRTABLE_RULE_PATTERN_FIELD=תבנית התאמה
AIRTABLE_RULE_CATEGORY_FIELD=קטגוריה
AIRTABLE_RULE_ENTITY_FIELD=ישות
AIRTABLE_RULE_TYPE_FIELD=סוג
AIRTABLE_RULE_CONFIDENCE_FIELD=רמת ביטחון
AIRTABLE_RULE_TIMES_USED_FIELD=מספר שימושים
AIRTABLE_RULE_CREATED_BY_FIELD=נוצר על ידי
AIRTABLE_RULE_DESCRIPTION_FIELD=תיאור

# ========================================
# Scraper & Automation Configuration (Phase 1)
# ========================================

# Encryption key for credentials (32 bytes hex)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
CREDENTIALS_ENCRYPTION_KEY=

# Bank Credentials (encrypted JSON strings - use lib/utils-crypto.ts encrypt() function)
# Discount format: {"id":"123456789","password":"mypass","num":"12"}
# Cal (כאל) format: {"username":"user","password":"pass"}
# Max format: {"username":"user","password":"pass","id":"123456789"} (id אופציונלי)
#
# Card filtering (אופציונלי):
# להוסיף accountNumbers לסינון כרטיסים ספציפיים:
# {"username":"user","password":"pass","accountNumbers":["1234","5678"]}
CREDENTIALS_DISCOUNT_TOM=
CREDENTIALS_DISCOUNT_YAEL=
CREDENTIALS_CAL_TOM=
CREDENTIALS_CAL_YAEL=
CREDENTIALS_MAX_TOM=
CREDENTIALS_MAX_YAEL=

# Telegram Bot
# Get bot token from @BotFather
# Get chat IDs by messaging the bot and using @userinfobot or bot.getUpdates()
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID_TOM=
TELEGRAM_CHAT_ID_YAEL=

# Instructions:
# 1. Copy this file to .env.local
# 2. Replace the XXXX placeholders with your actual Airtable credentials
# 3. Generate secure JWT secrets using crypto.randomBytes(32).toString('hex')
# 4. Generate CREDENTIALS_ENCRYPTION_KEY (32 bytes hex)
# 5. Encrypt bank credentials using encrypt() from lib/utils-crypto.ts
# 6. Create Telegram bot via @BotFather and get token
# 7. Get Telegram chat IDs using @userinfobot or getUpdates()
# 8. Generate password hashes using bcryptjs
# 9. Verify all field names match your Airtable base exactly (case-sensitive)
# 10. Never commit .env.local to git (it's in .gitignore)
# 11. For Railway deployment, set these as environment variables in the Railway dashboard
